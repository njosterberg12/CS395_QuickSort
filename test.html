<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=EDGE"/>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<!-- Chrome browser will display response in the form of html page by using above line. -->
		<link rel="stylesheet" href="../HelperFunctions/general.css">
		<script type="text/javascript" src="../HelperFunctions/general.js"></script>
		<script type="text/javascript" src="../HelperFunctions/tableFunctions.js"></script>
		<script type="text/javascript" src="../HelperFunctions/headerFunction.js"></script>
		<script type="text/javascript" src="../HelperFunctions/pseudocodeFunctions.js"></script>
		<style>
			/* CSS space */
			.labelCellFormat
			{
				font-size: 35px;
				width: 70px;
				height: 50px;
				text-align: center;
				border-style: solid;
				border-width: 2px;
				border-color: black;
				background-color: #FFFFFF;
			}
			.InputCellFormat
			{
				font-size: 35px;
				width: 70px;
				height: 50px;
				text-align: center;
				border-style: solid;
				border-width: 2px;
				border-color: black;
				background-color:#DEDEDE;
			}
		</style>
		<script type="text/javascript">
			var numElements = 5;
			var myTableId = "myArray";
			var myPseudocodeTableId = "myPseudocodeTable";
			var currentNode = 0;
			var currentX = 0;
			var currentY = 0;
			
			var currentI = 0;
			var currentJ = 0;
			var currentK = 0;

			var currentMode = 0;
			var initialji = 0;

			function funNumElements()
			{
				numElements = parseInt(document.getElementById("NumElements").value, 10);
				createKTable();
			}
			function createKTable()
			{
				createTable(myTableId, numElements + 1, 2);
				setCell(myTableId, 0, 0, "i:");
				setCell(myTableId, 0, 1, "value:");
				setCellCSSClass(myTableId, 0, 1, "InputCellFormat");
				for(x = 0; x < numElements + 1; x++)
				{
					if( x != 0)
					{
						setCell(myTableId, x, 0, x-1);
					}
					setCellCSSClass(myTableId, x, 0, "labelCellFormat");
				}
					for(x = 0; x < numElements + 1; x++)
					{
						if( x != 0)
						{
							setCellAsInputBox2(myTableId, x, 1, getRandomCount(25));
						}
					}
				var low = 0; // first element in the array
				var high = numElements - 1; // this is the last element in the array
				createPsuedocodeTable(myPseudocodeTableId);
				appendPseudocode(myPsuedocodeTableId, "hello");
				quickSort(myTableId, low, high);

			}
			//Sets cell as input box and applies CSS style
			function setCellAsInputBox2(myTableId, x,y, initialValue) 
			{
  				var myTable = document.getElementById(myTableId); 
  				var input = document.createElement("input");
 				input.type = "text";
  				input.className = "InputCellFormat"; // set the CSS class
  				input.value = initialValue;
  				//input.style["width"] = "32px";
  				//input.onchange = "inputBoxChanged("+x+","+y+")";
  				input.onchange = function() {inputBoxChanged(myTableId, x, y)};
  				var mycell = myTable.rows[y].cells[x];
				if (mycell.hasChildNodes()) 
				{
     				mycell.removeChild(mycell.childNodes[0]);
  				} 
  				mycell.appendChild(input);  
  				input.focus();  
			}
			function setCellCSSClass(myTableId, x, y, applyClass)
			{
				var myTable = document.getElementById(myTableId);
				var mycell = myTable.rows[y].cells[x];
				mycell.className = applyClass;
			}
			function quickSort(myTableId, low, high)
			{
				appendPseudocode(myPseudocodeTableId, "quickSort()");
				var myTable = document.getElementById(myTableId);
				var index;
				appendPseudocode(myPsuedocodeTableId, "if low < high");
				if (low < high)
				{
					appendPseudocode(myPsuedocodeTableId, "index = lomutoPartition()");
					index = lomutoPartition(myTable, low, high); // index determined by partition
					quickSort(myTable, low, index - 1);
					quickSort(myTable, index, high);
				}
				return myTable;
			}
			function lomutoPartition(myTableId, low, high)
			{
				var myTable = document.getElementById(myTableId);
				var pivot = myTable[Math.floor((low + high)/ 2 )]; // finds middle element of myTable
				var i = low; // left pointer
				var j = high; // right pointer
				while(i <= j)
				{
					while(myTable[i] < pivot)
					{
						i++;
					}
					while(myTable[j] < pivot)
					{
						j--;
					}
					if (i <= j)
					{
						swap(myTable, i, j); // swap elements in myTable
						i++;
						j--;
					}
				}
				return i;
			}
			function swap(myTableId, low, high)
			{
				var myTable = document.getElementById(myTableId);
				var temp = myTable[low];
				myTable[low] = myTable[high];
				myTable[high] = temp;
			}

		</script>
	</head>
	<body onload="welcome()">
		<!--Header-->
		<script>
			createHeader("Quick Sort");
		</script>
		<p>
			Do a quickSort of the values in ascending order. For information about quicksort, click <a target=\"_blank\" href="https://en.wikipedia.org/wiki/Quicksort"> here</a>. 
		</p>
		<p>
			Input the appropriate number in the slot as to how a quickSort would sort the data.
		</p>
		<script>
			//welcome();
		</script>
		How many elements do you want to sort?:
		<select style="width:80px" id="NumElements" name="NumElements">
			<option>5</option>
			<option>6</option>
			<option>7</option>
			<option>8</option>
			<option>9</option>
			<option>10</option>
		</select>
	
		<script>
			document.getElementById("NumElements").onchange = function() {funNumElements()};
		</script>
		
		<BR>
		<input style="visibility:hidden;" type="button" id="ButtonShowMe" value="ShowMe" onclick="(nextStep())" disabled>
		<input style="visibility:hidden;" type="button" id="ButtonYes" value="Yes" onclick="choseYes()" disabled>
		<input style="visibility:hidden;" type="button" id="ButtonNo"value="No" onclick="choseNo()" disabled>
	
</body>
</html>